(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[285],{9578:function(e,t,r){Promise.resolve().then(r.bind(r,7111))},7111:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Z}});var n=r(7437),a=r(2265),l=r(7655),s=r(3918),o=r(2826),i=r(7675),c=r(8870),u=r(192),d=r(5057),h=r(5672),m=r(3714),p=r(5502),g=r(7893),f=r(762),y=r(3046),j=r(2143),x=r(6438);let v=async()=>{try{return await (0,x.p)("/api/payment")}catch(e){throw console.error("Error fetching agreement:",e),Error("Error fetching agreement")}};var S=r(8221),Z=()=>{let[e,t]=(0,a.useState)(""),r=(0,y.v9)(j.bN),Z=(0,y.v9)(j.oG),[k,b]=(0,a.useState)(),[C,w]=(0,a.useState)(""),[P,I]=(0,a.useState)(["","","",""]),[N,E]=(0,a.useState)(null),[_,A]=(0,a.useState)("");(0,a.useEffect)(()=>{(async()=>{try{let e=await v();b(e)}catch(e){console.error("Error fetching agreement:",e)}})()},[]);let T=async()=>{var e,n;let a=parseInt(P.join(""),10);if(!B(C)){t("İsim Soyisim boş olamaz.");return}if(!K(a)){t("Kart numarası 16 haneli olmalıdır.");return}if(!O(_)){t("CVV 3 haneli olmalıdır.");return}let s={packageIds:r.map(e=>Number(e._id)),cardHolderName:null!=C?C:"",cardNumber:null!=a?a:0,expireDate:null!==(e=null==N?void 0:N.toISOString())&&void 0!==e?e:"",cvv:null!==(n=null==_?void 0:_.toString())&&void 0!==n?n:"",totalAmount:Z,currency:"BMD"};try{await (0,x.p)("/api/payment",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}}),l.ZP.success("\xd6deme başarılı!")}catch(e){t(e.message)}},B=e=>null!==e&&e.toString().length>0,K=e=>null!==e&&16===e.toString().length,O=e=>null!==e&&3===e.toString().length,V=(e,t)=>{if(/^\d*$/.test(t)&&t.length<=4){let r=[...P];r[e]=t,I(r)}},z=e=>{(0,S.Z)(e)&&e.length<=3&&A(e)};return(0,n.jsxs)(s.Z,{children:[(0,n.jsxs)(o.Z,{span:16,children:[e&&(0,n.jsx)(i.Z,{message:e,type:"error",showIcon:!0}),(0,n.jsx)(c.Z,{title:"Kart Bilgileri",bordered:!0,children:(0,n.jsxs)(u.Z,{labelCol:{span:8},wrapperCol:{span:20},layout:"vertical",style:{maxWidth:600},children:[(0,n.jsx)(u.Z.Item,{label:"Kart \xdczerindeki İsim Soyisim",children:(0,n.jsx)(d.Z,{value:C,onChange:e=>w(e.target.value)})}),(0,n.jsx)(u.Z.Item,{label:"Kart Numarası",children:(0,n.jsx)("div",{children:P.map((e,t)=>(0,n.jsx)(h.Z,{className:"mr-1",value:e,onChange:e=>V(t,String(e))},t))})}),(0,n.jsx)(u.Z.Item,{label:"Son Kul. Tar.",children:(0,n.jsx)(m.Z,{value:N,picker:"month",onChange:e=>E(e)})}),(0,n.jsx)(u.Z.Item,{label:"CVV/CVC",children:(0,n.jsx)(d.Z,{style:{width:"60px"},type:"text",value:_,onChange:e=>z(e.target.value)})})]})}),(0,n.jsx)("br",{}),(0,n.jsx)(c.Z,{title:"S\xf6zleşme",bordered:!0,children:null==k?void 0:k.content})]}),(0,n.jsx)(o.Z,{span:7,offset:1,children:(0,n.jsxs)(c.Z,{title:"Sepetteki Paketler",bordered:!0,children:[(0,n.jsx)(p.Z,{dataSource:r,renderItem:(e,t)=>(0,n.jsx)(p.Z.Item,{children:(0,n.jsx)(p.Z.Item.Meta,{title:e.name,description:e.price+e.currency})})}),(0,n.jsx)(g.Z,{vertical:!0,gap:"small",style:{width:"100%"},children:(0,n.jsx)(f.ZP,{onClick:()=>T(),type:"primary",children:"\xd6deme Yap"})})]})})]})}},2143:function(e,t,r){"use strict";r.d(t,{BU:function(){return o},av:function(){return a},bN:function(){return c},dy:function(){return i},oG:function(){return u},oX:function(){return s}});let n=(0,r(9730).oM)({name:"user",initialState:{user:null,selectedPackages:[],totalAmount:0},reducers:{setUser:(e,t)=>{e.user=t.payload},clearUser:e=>{e.user=null},selectPackage:(e,t)=>{e.selectedPackages.push(t.payload),e.totalAmount+=t.payload.price},deselectPackage:(e,t)=>{let r=e.selectedPackages.find(e=>e._id===t.payload);r&&(e.totalAmount-=r.price,e.selectedPackages=e.selectedPackages.filter(e=>e._id!==t.payload))}}}),{setUser:a,clearUser:l,selectPackage:s,deselectPackage:o}=n.actions,i=e=>e.user.user,c=e=>e.user.selectedPackages,u=e=>e.user.totalAmount;t.ZP=n.reducer},6438:function(e,t,r){"use strict";r.d(t,{p:function(){return a}});var n=r(9338);let a=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,n.bW)(),a={"Content-Type":"application/json"};r&&(a.Authorization="Bearer ".concat(r));let l={...t,headers:a},s=await fetch("".concat("https://caseapi-fe.paramtech.com.tr").concat(e),l);if(!s.ok)throw Error("Network response was not ok");return s.json()}},9338:function(e,t,r){"use strict";r.d(t,{bW:function(){return n},uB:function(){return a}});let n=()=>localStorage.getItem("authToken"),a=e=>{localStorage.setItem("authToken",e)}}},function(e){e.O(0,[697,579,890,996,541,971,938,744],function(){return e(e.s=9578)}),_N_E=e.O()}]);